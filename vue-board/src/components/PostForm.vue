<template>
  <div>
    <h2>ğŸ“ ìƒˆ ê¸€ ì‘ì„±</h2>
    <form @submit.prevent="submitForm">
      <input v-model="title" type="text" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" />
      <br />
      <textarea v-model="content" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" rows="5" cols="30"></textarea>
      <br />
      <button type="submit">ì‘ì„± ì™„ë£Œ</button> 
    </form>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { useRouter } from 'vue-router'
import { usePostStore } from '../stores/postStore' // ìŠ¤í† ì–´ ê°€ì ¸ì˜¤ê¸°

// ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì œëª©ì„ ë‹´ì„ ë°˜ì‘í˜• ë³€ìˆ˜
const title = ref("")
// ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë‚´ìš©ì„ ë‹´ì„ ë°˜ì‘í˜• ë³€ìˆ˜
const content = ref("")

// í˜ì´ì§€ ì´ë™ì„ ìœ„í•œ ë¼ìš°í„° ì¸ìŠ¤í„´ìŠ¤ ê°€ì ¸ì˜¤ê¸°
const router = useRouter()

const store = usePostStore() // ìŠ¤í† ì–´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

// ì‘ì„± ì™„ë£Œ ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ë  í•¨ìˆ˜
function submitForm() {
  if (title.value.trim() === "" || content.value.trim() === "") {
    alert("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!")
    return
  }

  store.addPost(title.value, content.value) // ì œëª©, ë‚´ìš© ì „ë‹¬
  // ì‘ì„± í›„ ëª©ë¡ìœ¼ë¡œ ì´ë™
  router.push("/")
}
</script>
